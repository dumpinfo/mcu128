#line 1 "E:\新建文件夹\avr资料\例程\m16\KS0108标准12864N\huomen.c"




#line 1 "D:/PROGRA~1/icc/include/iom16v.h"




#line 7 "D:/PROGRA~1/icc/include/iom16v.h"


#line 10 "D:/PROGRA~1/icc/include/iom16v.h"


#line 13 "D:/PROGRA~1/icc/include/iom16v.h"


#line 16 "D:/PROGRA~1/icc/include/iom16v.h"
























































































































































































































































































































































































































































































































#line 6 "E:\新建文件夹\avr资料\例程\m16\KS0108标准12864N\huomen.c"
#line 1 "D:/PROGRA~1/icc/include/macros.h"






























#line 35 "D:/PROGRA~1/icc/include/macros.h"














void _StackCheck(void);
void _StackOverflowed(char);




#line 7 "E:\新建文件夹\avr资料\例程\m16\KS0108标准12864N\huomen.c"
#line 1 "D:/PROGRA~1/icc/include/stdlib.h"


#line 1 "D:/PROGRA~1/icc/include/_const.h"




#line 10 "D:/PROGRA~1/icc/include/_const.h"







#line 4 "D:/PROGRA~1/icc/include/stdlib.h"






#line 1 "D:/PROGRA~1/icc/include/limits.h"






















#line 11 "D:/PROGRA~1/icc/include/stdlib.h"




typedef unsigned int size_t;










#line 35 "D:/PROGRA~1/icc/include/stdlib.h"
char *ftoa(float f, int *status);

int abs(int);
double atof( char *);
int atoi( char *);
long atol( char *);
int rand(void);
void srand(unsigned);
long strtol( char *, char **, int);
unsigned long strtoul( char *, char **, int);


char *ltoa(char *buf, long i, int base);
char *itoa(char *buf, int i, int base);
char *ultoa(char *buf, unsigned long i, int base);
char *utoa(char *buf, unsigned i, int base);


void abort(void);
void *calloc(size_t, size_t);
void exit(int);
void free(void *);
void *malloc(size_t);
void _NewHeap(void *start, void *end);
void *realloc(void *, size_t);




#line 8 "E:\新建文件夹\avr资料\例程\m16\KS0108标准12864N\huomen.c"

#line 1 "E:\新建文件夹\avr资料\例程\m16\KS0108标准12864N/12864.h"
#line 1 "D:/PROGRA~1/icc/include/iom16v.h"




#line 7 "D:/PROGRA~1/icc/include/iom16v.h"


#line 10 "D:/PROGRA~1/icc/include/iom16v.h"


#line 13 "D:/PROGRA~1/icc/include/iom16v.h"


#line 16 "D:/PROGRA~1/icc/include/iom16v.h"
























































































































































































































































































































































































































































































































#line 2 "E:\新建文件夹\avr资料\例程\m16\KS0108标准12864N/12864.h"
#line 1 "D:/PROGRA~1/icc/include/macros.h"






























#line 35 "D:/PROGRA~1/icc/include/macros.h"




















#line 3 "E:\新建文件夹\avr资料\例程\m16\KS0108标准12864N/12864.h"
#line 1 "D:/PROGRA~1/icc/include/stdlib.h"

























#line 35 "D:/PROGRA~1/icc/include/stdlib.h"





























#line 4 "E:\新建文件夹\avr资料\例程\m16\KS0108标准12864N/12864.h"
#line 1 "E:\新建文件夹\avr资料\例程\m16\KS0108标准12864N/font.h"


unsigned  const code font[]={



0x14,0x24,0x44,0x84,0x64,0x1C,0x20,0x18,0x0F,0xE8,0x08,0x08,0x28,0x18,0x08,0x00,
0x20,0x10,0x4C,0x43,0x43,0x2C,0x20,0x10,0x0C,0x03,0x06,0x18,0x30,0x60,0x20,0x00,

0x40,0x41,0xCE,0x04,0x00,0xFC,0x04,0x02,0x02,0xFC,0x04,0x04,0x04,0xFC,0x00,0x00,
0x40,0x20,0x1F,0x20,0x40,0x47,0x42,0x41,0x40,0x5F,0x40,0x42,0x44,0x43,0x40,0x00,

0x40,0x20,0xF0,0x1C,0x07,0xF2,0x94,0x94,0x94,0xFF,0x94,0x94,0x94,0xF4,0x04,0x00,
0x00,0x00,0x7F,0x00,0x40,0x41,0x22,0x14,0x0C,0x13,0x10,0x30,0x20,0x61,0x20,0x00,

0x00,0x00,0x00,0xFE,0x22,0x22,0x22,0x22,0xFE,0x22,0x22,0x22,0x22,0xFE,0x00,0x00,
0x80,0x40,0x30,0x0F,0x02,0x02,0x02,0x02,0xFF,0x02,0x02,0x42,0x82,0x7F,0x00,0x00,

0x40,0x40,0xFE,0x48,0x48,0x48,0xF8,0x4F,0x08,0xC8,0x78,0x48,0x5E,0xC0,0x00,0x00,
0x00,0x00,0xFF,0x44,0x44,0x44,0x7F,0x80,0x41,0x30,0x0F,0x10,0x61,0xC0,0x40,0x00,


0x00,0x00,0x00,0x00,0x00,0x01,0xE2,0x1C,0xE0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x80,0x40,0x20,0x10,0x0C,0x03,0x00,0x00,0x00,0x03,0x0C,0x30,0x40,0xC0,0x40,0x00,


0x10,0x10,0x90,0x90,0x90,0x90,0x90,0x10,0xFF,0x10,0x12,0x14,0x10,0x18,0x10,0x00,
0x00,0x20,0x60,0x20,0x1F,0x10,0x10,0x08,0x01,0x06,0x18,0x20,0x40,0x80,0x70,0x00,


0x02,0x02,0xFE,0x12,0x12,0xFE,0x02,0x11,0x12,0x16,0xF0,0x14,0x12,0x93,0x00,0x00,
0x20,0x20,0x3F,0x11,0x11,0xFF,0x91,0x41,0x21,0x19,0x07,0x19,0x61,0xC1,0x41,0x00,


0x00,0x00,0xFF,0x49,0x49,0x49,0x7F,0x80,0x7F,0x49,0x49,0x49,0xFF,0x00,0x00,0x00,
0x40,0x40,0x7C,0x44,0x44,0x7E,0x45,0x44,0x44,0x7C,0x45,0x46,0x7D,0x40,0x40,0x00,


0x40,0x40,0x42,0xCC,0x00,0x40,0xA0,0x9F,0x81,0x81,0x81,0x9F,0xA0,0x20,0x20,0x00,
0x00,0x00,0x00,0x7F,0xA0,0x90,0x40,0x43,0x2C,0x10,0x28,0x26,0x41,0xC0,0x40,0x00,


0x40,0x40,0x42,0xCC,0x00,0x40,0x40,0x40,0x40,0xFF,0x40,0x40,0x40,0x60,0x40,0x00,
0x00,0x00,0x00,0x7F,0x20,0x10,0x08,0x00,0x00,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,

0x00,0x00,0x80,0x38,0x78,0xC0,0x00,0x00,0x00,0x18,0xF8,0x00,0x00,0x40,0x18,0x00,
0x00,0x38,0x03,0x02,0x02,0x2F,0x3C,0x20,0x00,0x00,0x01,0x1F,0x1C,0x01,0x00,0x00,

0x00,0xF8,0xF8,0x08,0x08,0x88,0x70,0x00,0x00,0x00,0x00,0x00,0x80,0x60,0x18,0x06,
0x00,0x3F,0x3F,0x01,0x03,0x1E,0x30,0x20,0x00,0x60,0x38,0x0E,0x01,0x00,0x00,0x00,


0x00,0xF0,0xF8,0x88,0xC8,0x88,0x88,0x00,0x00,0x00,0x10,0xF0,0xF8,0x00,0x00,0x00,
0x00,0x19,0x39,0x20,0x20,0x31,0x1F,0x06,0x00,0x00,0x20,0x3F,0x3F,0x20,0x20,0x00,

0x00,0x38,0xF8,0xC0,0x00,0xC0,0x78,0x08,0x00,0x30,0x38,0x88,0x88,0xF8,0x70,0x00,
0x00,0x00,0x03,0x3F,0x3C,0x07,0x00,0x00,0x00,0x18,0x38,0x21,0x21,0x33,0x1E,0x0C,




0x80,0x82,0x82,0x82,0xFE,0x82,0x82,0x82,0x82,0x82,0xFE,0x82,0x83,0xC2,0x80,0x00,
0x00,0x80,0x40,0x30,0x0F,0x00,0x00,0x00,0x00,0x00,0xFF,0x00,0x00,0x00,0x00,0x00,

0x00,0x10,0x18,0x16,0x10,0x90,0xF0,0x9F,0x90,0x90,0x92,0x94,0x10,0x18,0x10,0x00,
0x40,0x20,0x90,0x88,0x46,0x41,0x23,0x14,0x08,0x14,0x22,0x21,0x40,0xC0,0x40,0x00,

0x00,0x02,0x22,0x22,0x32,0x2E,0xA2,0x62,0x22,0x22,0x91,0x09,0x01,0x00,0x00,0x00,
0x00,0x00,0x42,0x22,0x1A,0x43,0x82,0x7E,0x02,0x02,0x0A,0x13,0x66,0x00,0x00,0x00,

0x20,0x30,0xAC,0x63,0x30,0x88,0xC8,0xA8,0x99,0x8E,0x88,0xA8,0xCC,0x88,0x00,0x00,
0x22,0x67,0x22,0x12,0x92,0x40,0x30,0x0F,0x00,0x00,0x3F,0x40,0x40,0x41,0x70,0x00,


0x00,0xF8,0xF8,0x08,0x08,0x08,0xF8,0xF0,0xF8,0xFC,0x80,0xC0,0xC0,0x80,0x00,0x00,
0x20,0x3F,0x3F,0x21,0x01,0x01,0x01,0x00,0x20,0x3F,0x3F,0x20,0x00,0x20,0x3F,0x20,


0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10,0xF0,0xF8,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x3F,0x3F,0x20,0x20,0x00,


0x00,0x30,0x38,0x88,0x88,0xF8,0x70,0x00,0x00,0xF0,0xF8,0x08,0x08,0x18,0xF0,0xE0,
0x00,0x18,0x38,0x21,0x21,0x33,0x1E,0x0C,0x00,0x11,0x3B,0x22,0x22,0x3B,0x1F,0x07,


0x00,0x38,0x18,0x08,0x88,0xE8,0x38,0x08,0x00,0xF0,0xF8,0x08,0x08,0x18,0xF0,0xE0,
0x00,0x00,0x00,0x3E,0x3F,0x00,0x00,0x00,0x00,0x11,0x3B,0x22,0x22,0x3B,0x1F,0x07,


0x00,0x70,0xF8,0x88,0x88,0x88,0xF8,0x20,0x00,0x00,0x10,0xF0,0xF8,0x00,0x00,0x00,
0x00,0x1E,0x37,0x21,0x21,0x23,0x1E,0x0C,0x00,0x00,0x20,0x3F,0x3F,0x20,0x20,0x00,


0x00,0x30,0x38,0x88,0x88,0xF8,0x70,0x00,0x00,0x30,0x38,0x88,0x88,0xF8,0x70,0x00,
0x00,0x18,0x38,0x21,0x21,0x33,0x1E,0x0C,0x00,0x18,0x38,0x21,0x21,0x33,0x1E,0x0C,


0x00,0x30,0x38,0x88,0x88,0xF8,0x70,0x00,0x00,0x70,0x78,0x08,0x08,0xD8,0xF0,0x20,
0x00,0x18,0x38,0x21,0x21,0x33,0x1E,0x0C,0x00,0x30,0x38,0x34,0x32,0x31,0x38,0x08,

};
#line 5 "E:\新建文件夹\avr资料\例程\m16\KS0108标准12864N/12864.h"
#line 1 "D:/PROGRA~1/icc/include/string.h"


#line 1 "D:/PROGRA~1/icc/include/_const.h"




#line 10 "D:/PROGRA~1/icc/include/_const.h"







#line 4 "D:/PROGRA~1/icc/include/string.h"





















void *memcpy(void *, void *, size_t);
void *memset(void *, int, size_t);
void *memchr(void *, int, size_t);
int memcmp(void *, void *, size_t);
void *memmove(void *, void *, size_t);

char *strchr( char *, int);
int strcoll( char *, char *);
size_t strcspn( char *, char *);
char *strncat(char *, char *, size_t);
int strncmp( char *, char *, size_t);
char *strncpy(char *, char *, size_t);
char *strpbrk( char *, char *);
char *strrchr( char *, int);
size_t strspn( char *, char *);
char *strstr( char *, char *);


char *strtok(char *, char *);


size_t strlen( char *);
char *strcpy(char *, char *);
int strcmp( char *, char *);
char *strcat(char *, char *);


size_t cstrlen(const char *cs);
char *cstrcpy(char *, const char *cs);
char *cstrncpy(char *, const char *cs, size_t);
int cstrcmp(const char *cs, char *);
char *cstrcat(char *, const char *);



int cstrncmp(const char *cs, char *i, int);

char *cstrstr(char *ramstr, const char *romstr);
char *cstrstrx(char *ramstr, const char *romstr);
void *cmemcpy(void *, const void *, size_t);
void *cmemchr(const void *, int, size_t);
int cmemcmp(const void *, void *, size_t);



#line 72 "D:/PROGRA~1/icc/include/string.h"

#line 6 "E:\新建文件夹\avr资料\例程\m16\KS0108标准12864N/12864.h"

























void OutI(unsigned char CtroCode,unsigned char Com);
void OutD(unsigned char CtroCode,unsigned char Dat);
void LCD_NOP(void);
void ClearDisplay(void);
void DisplayWord(unsigned int Add,unsigned char xAdd,unsigned char yAdd,
unsigned char SelscP,unsigned char num,unsigned char flag);
void DisplayLine(unsigned int Add,unsigned char com,unsigned char line,unsigned char flag);



void OutI(unsigned char CtroCode,unsigned char Com)
{
  unsigned char aa=1;
  switch(CtroCode)
  { case 0:((*(volatile unsigned char *)0x32) &= ~(1 << 2));
((*(volatile unsigned char *)0x32) &= ~(1 << 3));

  		 	break;
  	case 1:((*(volatile unsigned char *)0x32) &= ~(1 << 2));
((*(volatile unsigned char *)0x32) |=(1 << 3));

		 	break;
	case 2:((*(volatile unsigned char *)0x32) |=(1 << 2));
((*(volatile unsigned char *)0x32) &= ~(1 << 3));

		 	break;

  }
(*(volatile unsigned char *)0x3A)=0;
((*(volatile unsigned char *)0x32) &= ~(1 <<6));

#line 73 "E:\新建文件夹\avr资料\例程\m16\KS0108标准12864N/12864.h"
   LCD_NOP();
    LCD_NOP();
	 LCD_NOP();
	  LCD_NOP();
(*(volatile unsigned char *)0x3A)=0Xff;
((*(volatile unsigned char *)0x32) &= ~(1 <<5));

((*(volatile unsigned char *)0x32) |=(1 <<7));
  LCD_NOP();
(*(volatile unsigned char *)0x3B)=Com;
  LCD_NOP();
((*(volatile unsigned char *)0x32) &= ~(1 <<7));

((*(volatile unsigned char *)0x32) |=(1 << 2));
((*(volatile unsigned char *)0x32) |=(1 << 3));

}

void OutD(unsigned char CtroCode,unsigned char Dat)
{
  unsigned char aa=1;
   switch(CtroCode)
  { case 0:((*(volatile unsigned char *)0x32) &= ~(1 << 2));
((*(volatile unsigned char *)0x32) &= ~(1 << 3));

  		 	break;
  	case 1:((*(volatile unsigned char *)0x32) &= ~(1 << 2));
((*(volatile unsigned char *)0x32) |=(1 << 3));

		 	break;
	case 2:((*(volatile unsigned char *)0x32) |=(1 << 2));
((*(volatile unsigned char *)0x32) &= ~(1 << 3));

		 	break;

  }
(*(volatile unsigned char *)0x3A)=0X00;

#line 119 "E:\新建文件夹\avr资料\例程\m16\KS0108标准12864N/12864.h"
  LCD_NOP();
  LCD_NOP();
  LCD_NOP();
  LCD_NOP();
  LCD_NOP();
  LCD_NOP();

((*(volatile unsigned char *)0x32) &= ~(1 <<5));
((*(volatile unsigned char *)0x32) |=(1 <<6));
(*(volatile unsigned char *)0x3A)=0Xff;
((*(volatile unsigned char *)0x32) |=(1 <<7));
  LCD_NOP();
(*(volatile unsigned char *)0x3B)=Dat;


  LCD_NOP();
((*(volatile unsigned char *)0x32) &= ~(1 <<7));
((*(volatile unsigned char *)0x32) |=(1 << 2));
((*(volatile unsigned char *)0x32) |=(1 << 3));

}

void LCD_NOP(void)
{ unsigned int i;

  for(i=0;i<50;i++);
}

void ClearDisplay(void)
{ unsigned char i,j;

  for(i=0;i<8;i++)
  { OutI(0,0xb8+i);
  	OutI(0,0x40);
  	for(j=0;j<64;j++)
      OutD(0,0x00);
  }
}


void DisplayWord(unsigned int Add,unsigned char xAdd,unsigned char yAdd,
unsigned char SelscP,unsigned char num,unsigned char flag)
{ unsigned char i,m=0,dat;

  OutI(SelscP,xAdd++);
  OutI(SelscP,yAdd);
  while(m<num+2)
  { for(i=0;i<num;i++)
    { if(flag==0) dat=0;
	  else dat=font[Add+i+m];
	  OutD(SelscP,dat);
	}
	OutI(SelscP,xAdd++);
	OutI(SelscP,yAdd);
	m+=num;
   }
}

void DisplayLine(unsigned int Add,unsigned char com,unsigned char line,unsigned char flag)
{ unsigned char i,p,l,r;

  r=com&0x0f;
  l=com>>4;
  for(i=0;i<r;i++)
    DisplayWord(Add+i*32,0xb8+(line%4)*2,0x40+(i+l)*16,(line/4)+1,16,flag);
}



#line 10 "E:\新建文件夹\avr资料\例程\m16\KS0108标准12864N\huomen.c"
int i,j;
void port_init(void)
{
(*(volatile unsigned char *)0x3B) = 0xFF;
(*(volatile unsigned char *)0x3A)  = 0xFF;
(*(volatile unsigned char *)0x38) = 0xFF;
(*(volatile unsigned char *)0x37)  = 0xFF;
(*(volatile unsigned char *)0x35) = 0xFF;
(*(volatile unsigned char *)0x34)  = 0xFF;
(*(volatile unsigned char *)0x32) = 0xFF;
(*(volatile unsigned char *)0x31)  = 0xFF;
}


void init_devices(void)
{

 asm("cli");
 port_init();

(*(volatile unsigned char *)0x55) = 0x00;
(*(volatile unsigned char *)0x5B)  = 0x00;
(*(volatile unsigned char *)0x59) = 0x00;
 asm("sei");

}


void main(void)
{
 int k;
 init_devices();


  OutI(0,0x3e);
  OutI(0,0xb8);
  OutI(0,0x40);

  OutI(0,0xC0);
  OutI(0,0x3f);
  ClearDisplay();
  ClearDisplay();
   DisplayLine(0,0x04,0,1);
  DisplayLine(128,0x04,4,1);
  DisplayLine(256,0x04,1,1);
  DisplayLine(384,0x04,5,1);
  DisplayLine(512,0x03,2,1);
  DisplayLine(608,0x04,3,1);
  DisplayLine(736,0x03,7,1);






}

